<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Birthday ‚Äî Just for You</title>
  <link rel="stylesheet" href="assets/styles.css">
</head>
<body class="page page--birthday">
  <nav class="nav">
    <a href="index.html" class="nav__brand">For You</a>
    <ul class="nav__links">
      <li><a href="index.html#hero">Home</a></li>
      <li><a href="index.html#gallery">Moments</a></li>
      <li><a href="birthday.html" class="active cta">Birthday</a></li>
    </ul>
  </nav>

  <main id="content" class="container birthday-container">
    <section class="birthday-stage">
      <h1 class="birthday-title" id="birthday-message" style="opacity: 0; transform: translateY(-50px); transition: all 1s ease-out;">Happy Birthday Love ü•∞‚ù§Ô∏è</h1>
      <p class="birthday-sub" id="birthday-subtitle" style="transition: opacity 0.5s ease-out;">Time to blow the candles...simply tap the cake üòä</p>

      <div class="birthday-scene">
        <img 
          id="cake-image" 
          src="assets/Candle1.JPG" 
          alt="Birthday cake with candles" 
          style="max-width: 100%; height: auto; cursor: pointer; border-radius: 12px; box-shadow: 0 8px 24px rgba(230, 161, 184, 0.3); background: linear-gradient(135deg, #fff5f9 0%, #ffeef6 100%);"
        />
      </div>

      <div class="birthday-controls">
        <button id="playBtn" class="btn">Play Birthday</button>
        <button id="resetBtn" class="btn btn--muted">Reset Candles</button>
      </div>

      <canvas id="confetti" class="confetti-canvas" aria-hidden="true"></canvas>
      <audio id="birthday-song" preload="auto" src="assets/HBD.mp4"></audio>
    </section>
  </main>

  <footer class="site-footer">
    <p>With love ‚ù§Ô∏è</p>
  </footer>

  <script>
    let candlesLit = true;
    let confettiRunning = false;
    
    const cakeImage = document.getElementById('cake-image');
    const birthdayMessage = document.getElementById('birthday-message');
    const birthdaySong = document.getElementById('birthday-song');
    const confettiCanvas = document.getElementById('confetti');
    const playBtn = document.getElementById('playBtn');
    const resetBtn = document.getElementById('resetBtn');

    // Confetti
    function startConfetti() {
      if (confettiRunning) return;
      confettiRunning = true;
      
      const ctx = confettiCanvas.getContext('2d');
      confettiCanvas.width = window.innerWidth;
      confettiCanvas.height = window.innerHeight;
      
      const pieces = [];
      const colors = ['#ff9bb3','#ffd1e6','#ffefef','#ffc1d9','#ff7aa2'];
      
      for (let i=0; i<100; i++){
        pieces.push({
          x: Math.random() * window.innerWidth,
          y: Math.random() * -window.innerHeight,
          size: 6 + Math.random() * 12,
          color: colors[Math.floor(Math.random() * colors.length)],
          vx: -1 + Math.random() * 2,
          vy: 1 + Math.random() * 3,
          rot: Math.random() * 360,
          drot: -3 + Math.random() * 6
        });
      }
      
      function animate() {
        if (!confettiRunning) return;
        ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
        
        pieces.forEach(p => {
          p.x += p.vx;
          p.y += p.vy;
          p.rot += p.drot;
          
          if (p.y > window.innerHeight + 20) {
            p.y = -20;
            p.x = Math.random() * window.innerWidth;
          }
          
          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot * Math.PI / 180);
          ctx.fillStyle = p.color;
          
          const s = p.size;
          ctx.beginPath();
          ctx.moveTo(0, -s/2);
          ctx.bezierCurveTo(s/2, -s, s, -s/4, 0, s/2);
          ctx.bezierCurveTo(-s, -s/4, -s/2, -s, 0, -s/2);
          ctx.fill();
          ctx.restore();
        });
        
        requestAnimationFrame(animate);
      }
      animate();
    }

    function stopConfetti() {
      confettiRunning = false;
      const ctx = confettiCanvas.getContext('2d');
      ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
    }

    function blowCandles() {
      if (!candlesLit) return;
      candlesLit = false;
      
      // Change image
      cakeImage.src = 'assets/Candle2.JPG';
      
      // Hide subtitle
      const subtitle = document.getElementById('birthday-subtitle');
      if (subtitle) subtitle.style.opacity = '0';
      
      // Show message
      setTimeout(() => {
        birthdayMessage.style.opacity = '1';
        birthdayMessage.style.transform = 'translateY(0)';
      }, 300);
      
      // Start confetti
      startConfetti();
      
      // Play song
      birthdaySong.currentTime = 0;
      birthdaySong.play().catch(err => console.log('Audio play failed:', err));
    }

    function reset() {
      candlesLit = true;
      
      // Change image back
      cakeImage.src = 'assets/Candle1.JPG';
      
      // Show subtitle
      const subtitle = document.getElementById('birthday-subtitle');
      if (subtitle) subtitle.style.opacity = '1';
      
      // Hide message
      birthdayMessage.style.opacity = '0';
      birthdayMessage.style.transform = 'translateY(-50px)';
      
      // Stop confetti
      stopConfetti();
      
      // Stop song
      birthdaySong.pause();
      birthdaySong.currentTime = 0;
    }

    // Event listeners
    cakeImage.addEventListener('click', blowCandles);
    playBtn.addEventListener('click', blowCandles);
    resetBtn.addEventListener('click', reset);
  </script>
</body>
</html>
